cmake_minimum_required(VERSION 3.22 FATAL_ERROR)
if(POLICY CMP0091)
	cmake_policy(SET CMP0091 NEW)
endif()
project(AdaptiveX LANGUAGES CXX)
# 强制使用 C++20
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)  # 禁用 GNU 扩展，确保跨平台兼容性

if(MSVC)
	add_compile_options(/utf-8)
	set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>DLL")
endif()

# 使用 C11 标准
set(CMAKE_C_STANDARD 11)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_C_EXTENSIONS OFF)

set(CMAKE_BUILD_TYPE Debug)

message(STATUS "Build type:" ${CMAKE_BUILD_TYPE})
message(STATUS "C compiler flags:" ${CMAKE_C_FLAGS})
set(CMAKE_INSTALL_PREFIX "build_install")
add_subdirectory(flexCore)
add_subdirectory(app)
add_subdirectory(testCli)
#查看编译器标志
message(STATUS "C Compiler Flags: ${CMAKE_C_FLAGS}")
